{"version":3,"sources":["webpack://randomUser/./src/index.js"],"names":["totalPages","words","arrResultUsers","filtredUsers","sortedUsers","filter","searchValue","gender","age","sortParams","selectedOptions","perPage","currentPage","startSliceUsers","endSliceUsers","refs","loadMore","document","querySelector","usersContainer","user","spiner","statisticTemplate","statisticContainer","search","content","select","allCheckbox","Array","from","querySelectorAll","paginationList","startStep","endStep","prevStep","nextStep","selectPerPage","replaceMurkup","users","map","makeUserCard","classList","add","picture","name","phone","email","location","dob","registered","dateBirthday","Date","date","dateBirthdayContent","validDate","getUTCDate","getUTCMonth","getUTCFullYear","dateRegistered","dateRegisteredContent","replacedUser","innerHTML","replace","large","last","first","state","city","street","insertAdjacentHTML","value","String","padStart","getStatistics","female","male","dominantGender","stats","flatMap","nat","reduce","acc","nationality","replacesStatistics","length","Object","entries","makeNationalityMarkUp","join","createNationalityList","key","declensionUser","number","declensionAmount","clearCardesContainer","redrawPage","filterProducts","item","filtersBySearch","arrParam","filterParam","includes","rangeParam","range","keys","ranges","find","min","max","sort","val","optionsSort","sortByOption","slice","addEventListener","e","randomUsers","url","remove","selectedIndex","Math","floor","random","fetch","then","response","json","results","ceil","addPaginationButtons","onStepPagination","dropdownFilter","changePath","this","toggle","nextElementSibling","forEach","elem","filterAccordion","target","trim","toLowerCase","updatePagination","keyCode","preventDefault","cutUsers","checkbox","arr","push","0","1","a","b","localeCompare","2","3","4","5","6","7","8","findIncludesElement","Infinity","nodeName","textContent","currentActiveLink","maxPageVisible","half","round","to","maxPages","_","i","pageNumber","button","createPagePaginationMarkUp"],"mappings":"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","file":"bundle.js","sourcesContent":["import \"./scss/index.scss\";\r\n\r\nconst BASE_URL = \"https://randomuser.me/api/\";\r\nconst words = [\"пользователь\", \"пользователя\", \"пользователей\"];\r\nlet arrResultUsers = [];\r\nlet filtredUsers = [];\r\nlet sortedUsers = [];\r\nconst filter = { searchValue: \"\", gender: [], age: [] };\r\nconst sortParams = { selectedOptions: \"4\", perPage: 5 };\r\nlet countUsers = null;\r\nlet currentPage = 1; //текущий номер страницы\r\nlet totalPages; //всего страниц\r\nlet startSliceUsers = 0;\r\nlet endSliceUsers = 5;\r\nlet isSelectPerpage = false;\r\n\r\nconst refs = {\r\n  loadMore: document.querySelector(\"[data-load-more]\"),\r\n  usersContainer: document.querySelector(\"[data-users-container]\"),\r\n  user: document.querySelector(\"#user-template\"),\r\n  spiner: document.querySelector(\"[data-load-spiner]\"),\r\n  statisticTemplate: document.querySelector(\"#statistics\"),\r\n  statisticContainer: document.querySelector(\".statistics\"),\r\n  filter: document.querySelector(\".filter\"),\r\n  search: document.querySelector(\"[data-input-search]\"),\r\n  content: document.querySelector(\".users-content\"),\r\n  select: document.querySelector(\"#sort-control\"),\r\n  allCheckbox: Array.from(document.querySelectorAll('input[type=\"checkbox\"]')),\r\n  paginationList: document.querySelector(\".pagination__list\"),\r\n  startStep: document.querySelector(\"#first-step\"),\r\n  endStep: document.querySelector(\"#last-step\"),\r\n  prevStep: document.querySelector(\"#prev-step\"),\r\n  nextStep: document.querySelector(\"#next-step\"),\r\n  selectPerPage: document.querySelector(\"#view-control\"),\r\n};\r\n\r\nfunction getRandomUser(max) {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\nrefs.loadMore.addEventListener(\"click\", onLoad);\r\n\r\nfunction onLoad(e) {\r\n  refs.spiner.classList.remove(\"is-hidden\");\r\n  refs.search.value = \"\";\r\n  sortParams.selectedOptions = \"\";\r\n  sortParams.perPage = 5;\r\n  refs.selectPerPage.selectedIndex = 0;\r\n  refs.select.selectedIndex = 0;\r\n  currentPage = 1;\r\n  clearCardesContainer();\r\n  fetchUsers();\r\n  filterAccordion();\r\n  onSearch();\r\n  onSelect();\r\n  onSelectPerPage();\r\n  onCheckedFeature();\r\n}\r\n\r\nfunction getUsers(randomUsers) {\r\n  const url = `${BASE_URL}?&results=${randomUsers}`;\r\n\r\n  return fetch(url)\r\n    .then((response) => response.json())\r\n    .then(({ results }) => {\r\n      return results;\r\n    });\r\n}\r\n\r\nfunction fetchUsers() {\r\n  getUsers(getRandomUser(101)).then((users) => {\r\n    arrResultUsers = [...users];\r\n    filtredUsers = [...users];\r\n    sortedUsers = [...users];\r\n    replaceMurkup(arrResultUsers.slice(0, 5));\r\n    getStatistics(arrResultUsers);\r\n    createPagination();\r\n  });\r\n}\r\n\r\nfunction replaceMurkup(users) {\r\n  users.map(makeUserCard);\r\n  refs.spiner.classList.add(\"is-hidden\");\r\n}\r\n\r\nfunction makeUserCard({\r\n  picture,\r\n  name,\r\n  gender,\r\n  phone,\r\n  email,\r\n  location,\r\n  dob,\r\n  registered,\r\n}) {\r\n  const dateBirthday = new Date(dob.date);\r\n  const dateBirthdayContent = `${validDate(\r\n    dateBirthday.getUTCDate()\r\n  )}-${validDate(\r\n    dateBirthday.getUTCMonth() + 1\r\n  )}-${dateBirthday.getUTCFullYear()}`;\r\n\r\n  const dateRegistered = new Date(registered.date);\r\n  const dateRegisteredContent = `${validDate(\r\n    dateRegistered.getUTCDate()\r\n  )}-${validDate(\r\n    dateRegistered.getUTCMonth() + 1\r\n  )}-${dateRegistered.getUTCFullYear()}`;\r\n\r\n  const replacedUser = refs.user.innerHTML\r\n    .replace(/{{hrefImg}}/gi, picture.large)\r\n    .replace(/{{lastName}}/, name.last)\r\n    .replace(/{{firstName}}/, name.first)\r\n    .replace(/{{gender}}/, gender)\r\n    .replace(/{{phone}}/gi, phone)\r\n    .replace(/{{email}}/gi, email)\r\n    .replace(/{{state}}/, location.state)\r\n    .replace(/{{city}}/, location.city)\r\n    .replace(/{{street}}/, location.street.name)\r\n    .replace(/{{birthday}}/, dateBirthdayContent)\r\n    .replace(/{{registered}}/, dateRegisteredContent);\r\n  refs.usersContainer.insertAdjacentHTML(\"beforeend\", replacedUser);\r\n}\r\n\r\nfunction validDate(value) {\r\n  return String(value).padStart(2, \"0\");\r\n}\r\n\r\nfunction getStatistics(users) {\r\n  const female = users.filter((user) => user.gender === \"female\");\r\n  const male = users.filter((user) => user.gender === \"male\");\r\n  const dominantGender =\r\n    female > male ? \"женщин\" : female < male ? \"мужчин\" : \"равное количество\";\r\n\r\n  const stats = users\r\n    .flatMap((user) => user.nat)\r\n    .reduce(\r\n      (acc, nationality) => ({\r\n        ...acc,\r\n        [nationality]: acc[nationality] ? acc[nationality] + 1 : 1,\r\n      }),\r\n      {}\r\n    );\r\n\r\n  const replacesStatistics = refs.statisticTemplate.innerHTML\r\n    .replace(/{{users}}/, users.length)\r\n    .replace(/{{female}}/, female.length)\r\n    .replace(/{{male}}/, male.length)\r\n    .replace(/{{dominantGender}}/, dominantGender)\r\n    .replace(/{{nationality}}/, createNationalityList(stats));\r\n\r\n  refs.statisticContainer.innerHTML = replacesStatistics;\r\n}\r\n\r\nfunction createNationalityList(stats) {\r\n  return Object.entries(stats).map(makeNationalityMarkUp).join(\"\");\r\n}\r\n\r\nfunction makeNationalityMarkUp([key, value]) {\r\n  const declensionUser = declensionAmount(value, words);\r\n\r\n  return `<div>${key}: ${value} ${declensionUser}</div>`;\r\n}\r\n\r\nfunction declensionAmount(number, words) {\r\n  return words[\r\n    number % 100 > 4 && number % 100 < 20\r\n      ? 2\r\n      : [2, 0, 1, 1, 1, 2][number % 10 < 5 ? number % 10 : 5]\r\n  ];\r\n}\r\n\r\nfunction clearCardesContainer() {\r\n  refs.usersContainer.innerHTML = \"\";\r\n}\r\n\r\nfunction redrawPage() {\r\n  clearCardesContainer();\r\n  replaceMurkup(filtredUsers);\r\n  getStatistics(filtredUsers);\r\n}\r\n\r\n// Stage 2\r\n// поиск на странице\r\n\r\nfunction onSearch() {\r\n  refs.filter.classList.remove(\"is-hidden\");\r\n\r\n  refs.search.addEventListener(\"input\", (e) => {\r\n    filter.searchValue = e.target.value.trim().toLowerCase();\r\n\r\n    filterProducts();\r\n    redrawPage();\r\n    updatePagination();\r\n  });\r\n\r\n  refs.search.addEventListener(\"keypress\", (e) => {\r\n    e.keyCode == 13 && e.preventDefault();\r\n  });\r\n}\r\n\r\n// sort\r\n\r\nfunction onSelect() {\r\n  refs.content.classList.remove(\"is-hidden\");\r\n\r\n  refs.select.addEventListener(\"change\", function (e) {\r\n    sortParams.selectedOptions = this.value;\r\n\r\n    filterProducts();\r\n    redrawPage();\r\n  });\r\n}\r\n\r\n// фильтр по checked\r\n\r\nfunction onCheckedFeature() {\r\n  refs.allCheckbox.forEach((checkbox) => {\r\n    checkbox.addEventListener(\"click\", (e) => {\r\n      let arr = e.target.name;\r\n      let value = e.target.value;\r\n\r\n      !filter[arr].includes(value)\r\n        ? filter[arr].push(value)\r\n        : (filter[arr] = filter[arr].filter((item) => item !== value));\r\n\r\n      filterProducts();\r\n      clearCardesContainer();\r\n      replaceMurkup(filtredUsers);\r\n      getStatistics(filtredUsers);\r\n      updatePagination();\r\n    });\r\n  });\r\n}\r\n\r\n// фильтрация\r\n\r\nfunction filterProducts() {\r\n  filtredUsers = arrResultUsers\r\n    .filter((item) => filtersBySearch(item, filter.searchValue))\r\n    .filter((item) => applyCheckedFields(item.gender, filter.gender))\r\n    .filter((item) => applyCheckedAgeFields(item.dob.age, filter.age))\r\n    .sort(sortByOption(sortParams.selectedOptions));\r\n\r\n  sortedUsers = [...filtredUsers];\r\n  filtredUsers = filtredUsers.slice(startSliceUsers, endSliceUsers);\r\n}\r\n\r\nconst optionsSort = {\r\n  0: () => filtersBySearch(sortParams.selectedOptions),\r\n  1: (a, b) => a.name.last.localeCompare(b.name.last),\r\n  2: (a, b) => b.name.last.localeCompare(a.name.last),\r\n  3: (a, b) => b.gender.localeCompare(a.gender),\r\n  4: (a, b) => a.gender.localeCompare(b.gender),\r\n  5: (a, b) =>\r\n    b.gender.localeCompare(a.gender) || a.name.last.localeCompare(b.name.last),\r\n  6: (a, b) =>\r\n    b.gender.localeCompare(a.gender) || b.name.last.localeCompare(a.name.last),\r\n  7: (a, b) =>\r\n    a.gender.localeCompare(b.gender) || a.name.last.localeCompare(b.name.last),\r\n  8: (a, b) =>\r\n    a.gender.localeCompare(b.gender) || b.name.last.localeCompare(a.name.last),\r\n};\r\n\r\nfunction sortByOption(val) {\r\n  if (sortParams.selectedOptions === \"0\") {\r\n    true;\r\n  } else {\r\n    return optionsSort[val];\r\n  }\r\n}\r\n\r\n// Stage 3\r\n\r\nfunction applyCheckedFields(arrParam, filterParam) {\r\n  return filterParam.length === 0 ? true : filterParam.includes(arrParam);\r\n}\r\n\r\nfunction filtersBySearch(item, filterParam) {\r\n  return filterParam === \"\" ? true : findIncludesElement(item, filterParam);\r\n}\r\n\r\nfunction findIncludesElement(item, val) {\r\n  const includesElemenet =\r\n    item.email.toLowerCase().includes(val) ||\r\n    item.phone.toLowerCase().includes(val) ||\r\n    item.name.first.toLowerCase().includes(val) ||\r\n    item.name.last.toLowerCase().includes(val);\r\n  return includesElemenet;\r\n}\r\n\r\nconst ranges = {\r\n  \"0-35\": { min: 0, max: 35 },\r\n  \"35-40\": { min: 35, max: 40 },\r\n  \"40-45\": { min: 40, max: 45 },\r\n  \"45+\": { min: 45, max: Infinity },\r\n};\r\n\r\nfunction applyCheckedAgeFields(age, rangeParam) {\r\n  let range = Object.keys(ranges).find(\r\n    (range) => ranges[range].min <= age && ranges[range].max >= age\r\n  );\r\n\r\n  return rangeParam.length === 0 ? true : rangeParam.includes(range);\r\n}\r\n\r\nfunction onSelectPerPage() {\r\n  refs.selectPerPage.addEventListener(\"change\", function (e) {\r\n    !isSelectPerpage;\r\n    if (this.value === \"100\") {\r\n      sortParams.perPage = sortedUsers.length;\r\n    } else {\r\n      sortParams.perPage = +this.value;\r\n    }\r\n\r\n    totalPages = Math.ceil(sortedUsers.length / sortParams.perPage);\r\n\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n    updatePagination();\r\n  });\r\n}\r\n\r\n// pagination\r\n\r\nfunction createPagination() {\r\n  totalPages = Math.ceil(filtredUsers.length / sortParams.perPage); //кол-во страниц\r\n  refs.paginationList.innerHTML = \"\";\r\n  addPaginationButtons();\r\n  onStepPagination();\r\n}\r\n\r\nfunction updatePagination() {\r\n  totalPages = Math.ceil(sortedUsers.length / sortParams.perPage); //кол-во страниц\r\n\r\n  refs.paginationList.innerHTML = \"\";\r\n  addPaginationButtons();\r\n  onStepPagination();\r\n}\r\n\r\nfunction createPagePaginationMarkUp(content, cls = \"\") {\r\n  return `<a href=\"#\" class=\"pagination__item ${cls}\" data-page=\"${content}\">${content}</a>`;\r\n}\r\n\r\nfunction pageNumber(totalPages, maxPageVisible, currentPage) {\r\n  let half = Math.round(maxPageVisible / 2);\r\n  let to = maxPageVisible;\r\n  let total = totalPages;\r\n  let maxPages = maxPageVisible;\r\n\r\n  if (totalPages < 5) {\r\n    maxPages = totalPages;\r\n    half = 2;\r\n  }\r\n\r\n  if (currentPage + half >= total) {\r\n    to = total;\r\n  } else if (currentPage > half) {\r\n    to = currentPage + half;\r\n  } else if (currentPage + half < total) {\r\n    to = maxPages;\r\n  }\r\n  let from = to - maxPages;\r\n\r\n  return Array.from({ length: maxPages }, (_, i) => i + 1 + from);\r\n}\r\n\r\nfunction changeStylePagination() {\r\n  const currentActiveLink = document.querySelector(\".pagination__item.active\");\r\n\r\n  currentActiveLink && currentActiveLink.classList.remove(\"active\");\r\n\r\n  if (currentPage > 1) {\r\n    refs.startStep.classList.remove(\"pagination-state--disabled\");\r\n    refs.prevStep.classList.remove(\"pagination-state--disabled\");\r\n  } else {\r\n    refs.startStep.classList.add(\"pagination-state--disabled\");\r\n    refs.prevStep.classList.add(\"pagination-state--disabled\");\r\n  }\r\n\r\n  if (+currentPage === totalPages) {\r\n    refs.nextStep.classList.add(\"pagination-state--disabled\");\r\n    refs.endStep.classList.add(\"pagination-state--disabled\");\r\n  } else {\r\n    refs.nextStep.classList.remove(\"pagination-state--disabled\");\r\n    refs.endStep.classList.remove(\"pagination-state--disabled\");\r\n  }\r\n}\r\n\r\nfunction onStepPagination() {\r\n  const paginationList = document.querySelector(\".pagination__list\");\r\n\r\n  paginationList.addEventListener(\"click\", function (e) {\r\n    e.preventDefault();\r\n    if (e.target.nodeName === \"A\") {\r\n      currentPage = +e.target.textContent;\r\n    }\r\n\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n    addPaginationButtons();\r\n  });\r\n\r\n  refs.nextStep.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    currentPage += 1;\r\n    addPaginationButtons();\r\n\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n  });\r\n\r\n  refs.prevStep.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    currentPage -= 1;\r\n    addPaginationButtons();\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n  });\r\n\r\n  refs.startStep.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    currentPage = 1;\r\n    addPaginationButtons();\r\n\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n  });\r\n\r\n  refs.endStep.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n    currentPage = totalPages;\r\n    addPaginationButtons();\r\n\r\n    cutUsers();\r\n    filterProducts();\r\n    redrawPage();\r\n  });\r\n}\r\n\r\nfunction addPaginationButtons() {\r\n  refs.paginationList.innerHTML = \"\";\r\n  changeStylePagination();\r\n\r\n  let pages = pageNumber(totalPages, 5, currentPage);\r\n\r\n  pages.forEach((pageNumber) => {\r\n    const isCurrentPage = currentPage === pageNumber;\r\n    const button = createPagePaginationMarkUp(\r\n      pageNumber,\r\n      isCurrentPage ? \"active\" : \"\",\r\n      false\r\n    );\r\n    refs.paginationList.insertAdjacentHTML(\"beforeend\", button);\r\n  });\r\n}\r\n\r\nfunction cutUsers() {\r\n  startSliceUsers = (currentPage - 1) * sortParams.perPage;\r\n  endSliceUsers = startSliceUsers + sortParams.perPage;\r\n}\r\n\r\nfunction filterAccordion() {\r\n  const dropdownFilter = document.querySelectorAll(\"[data-select]\");\r\n\r\n  if (dropdownFilter) {\r\n    dropdownFilter.forEach((elem) => {\r\n      elem.addEventListener(\"click\", changePath);\r\n    });\r\n  }\r\n\r\n  function changePath(e) {\r\n    this.querySelector(\"[data-filter-path]\").classList.toggle(\"is-open\");\r\n    this.nextElementSibling.classList.toggle(\"visually-hidden\");\r\n  }\r\n}\r\n"],"sourceRoot":""}