!function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=["пользователь","пользователя","пользователей"],i=[],l=[],u="",s="",d={loadMore:document.querySelector("[data-load-more]"),usersContainer:document.querySelector("[data-users-container]"),user:document.querySelector("#user-template"),spiner:document.querySelector("[data-load-spiner]"),statistic:document.querySelector("#statistics"),usersFilter:document.querySelector(".users__filters"),search:document.querySelector("[data-input-search]"),sort:document.querySelector(".sort"),select:document.querySelector("#sort-control")};function f(e){e.map(m),d.spiner.classList.add("is-hidden")}function m(e){var t=e.picture,r=e.name,n=e.gender,a=e.phone,o=e.email,c=e.location,i=e.dob,l=e.registered,u=new Date(i.date),s="".concat(p(u.getUTCDate()),"-").concat(p(u.getUTCMonth()+1),"-").concat(u.getUTCFullYear()),f=new Date(l.date),m="".concat(p(f.getUTCDate()),"-").concat(p(f.getUTCMonth()+1),"-").concat(f.getUTCFullYear()),y=d.user.innerHTML.replaceAll(/{{hrefImg}}/gi,t.large).replace(/{{lastName}}/,r.last).replace(/{{firstName}}/,r.first).replace(/{{gender}}/,n).replaceAll(/{{phone}}/gi,a).replaceAll(/{{email}}/gi,o).replace(/{{state}}/,c.state).replace(/{{city}}/,c.city).replace(/{{street}}/,c.street.name).replace(/{{birthday}}/,s).replace(/{{registered}}/,m);d.usersContainer.insertAdjacentHTML("afterbegin",y)}function p(e){return String(e).padStart(2,"0")}function y(e){var n=e.filter((function(e){return"female"===e.gender})),a=e.filter((function(e){return"male"===e.gender})),o=n>a?"женщин":n<a?"мужчин":"равное количество",c=e.flatMap((function(e){return e.nat})).reduce((function(e,n){return t(t({},e),{},r({},n,e[n]?e[n]+1:1))}),{}),i=d.statistic.innerHTML.replace(/{{users}}/,e.length).replace(/{{female}}/,n.length).replace(/{{male}}/,a.length).replace(/{{dominantGender}}/,o).replace(/{{nationality}}/,function(e){return Object.entries(e).map(g).join("")}(c));d.usersContainer.insertAdjacentHTML("beforeend",i)}function g(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,a,o=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){i=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,r)||a(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1],l=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}(i,c);return"<div>".concat(o,": ").concat(i," ").concat(l,"</div>")}function h(){d.usersContainer.innerHTML=""}function b(){h(),f(l),y(l)}function v(e){l=i.filter((function(t){return t.email.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e)||t.name.first.toLowerCase().includes(e)||t.name.last.toLowerCase().includes(e)})),b()}d.loadMore.addEventListener("click",(function(e){var t,r;d.spiner.classList.remove("is-hidden"),d.search.value="",h(),(101,t=Math.floor(101*Math.random()),r="".concat("https://randomuser.me/api/","?results=").concat(t),fetch(r).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){i=n(e),l=n(e),f(i),y(i),d.usersFilter.classList.remove("is-hidden"),d.search.addEventListener("input",(function(e){v(u=e.target.value.trim().toLowerCase())})),d.search.addEventListener("keypress",(function(e){13==e.keyCode&&e.preventDefault()})),d.sort.classList.remove("is-hidden"),d.select.addEventListener("change",(function(e){v(u),s=this.value,l=l.sort(function(e){switch(e){case"1":return function(e,t){return t.name.last.localeCompare(e.name.last)};case"2":return function(e,t){return e.name.last.localeCompare(t.name.last)};case"3":return function(e,t){return e.gender.localeCompare(t.gender)};case"4":return function(e,t){return t.gender.localeCompare(e.gender)};case"5":return function(e,t){return e.gender.localeCompare(t.gender)||t.name.last.localeCompare(e.name.last)};case"6":return function(e,t){return e.gender.localeCompare(t.gender)||e.name.last.localeCompare(t.name.last)};case"7":return function(e,t){return t.gender.localeCompare(e.gender)||t.name.last.localeCompare(e.name.last)};case"8":return function(e,t){return t.gender.localeCompare(e.gender)||e.name.last.localeCompare(t.name.last)};default:v(u)}}(s)),b()}))}))}))}();
//# sourceMappingURL=bundle.js.map