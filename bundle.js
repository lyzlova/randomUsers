!function(){"use strict";!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t,n={loadMore:document.querySelector("[data-load-more]"),usersContainer:document.querySelector("[data-users-container]"),user:document.querySelector("#user-template"),spiner:document.querySelector("[data-load-spiner]"),statisticTemplate:document.querySelector("#statistics"),statisticContainer:document.querySelector(".statistics"),filter:document.querySelector(".filter"),search:document.querySelector("[data-input-search]"),content:document.querySelector(".users-content"),select:document.querySelector("#sort-control"),allCheckbox:(t=document.querySelectorAll('input[type="checkbox"]'),function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),paginationList:document.querySelector(".pagination__list"),startStep:document.querySelector("#first-step"),endStep:document.querySelector("#last-step"),prevStep:document.querySelector("#prev-step"),nextStep:document.querySelector("#next-step"),selectPerPage:document.querySelector("#view-control")},r={makeUserCard:function(e){var t=e.picture,r=e.name,a=e.gender,i=e.phone,o=e.email,c=e.location,l=e.dob,s=e.registered,u=new Date(l.date).toLocaleDateString(),d=new Date(s.date).toLocaleDateString();return n.user.innerHTML.replace(/{{hrefImg}}/gi,t.large).replace(/{{lastName}}/,r.last).replace(/{{firstName}}/,r.first).replace(/{{gender}}/,a).replace(/{{phone}}/gi,i).replace(/{{email}}/gi,o).replace(/{{state}}/,c.state).replace(/{{city}}/,c.city).replace(/{{street}}/,c.street.name).replace(/{{birthday}}/,u).replace(/{{registered}}/,d)},replaceMurkup:function(e){var t=e.map(this.makeUserCard).join("");n.usersContainer.insertAdjacentHTML("beforeend",t)},makeStatistics:function(e,t,r,a,i){return n.statisticTemplate.innerHTML.replace(/{{users}}/,r.length).replace(/{{female}}/,e.length).replace(/{{male}}/,t.length).replace(/{{dominantGender}}/,a).replace(/{{nationality}}/,i)},createPagePaginationMarkUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<a href="#" class="pagination__item '.concat(t,'" data-page="').concat(e,'">').concat(e,"</a>")}},a=JSON.parse('{"z":["пользователь","пользователя","пользователей"]}');function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u,d=[],p=[],f={searchValue:"",gender:[],age:[]},m={selectedOptions:"0",perPage:5},g=1,v=0,y=5,h=0;function b(e){var t,a=e.filter((function(e){return"female"===e.gender})),i=e.filter((function(e){return"male"===e.gender}));t=a>i?"женщин":a<i?"мужчин":"равное количество";var l=e.flatMap((function(e){return e.nat})).reduce((function(e,t){return o(o({},e),{},c({},t,e[t]?e[t]+1:1))}),{}),s=r.makeStatistics(a,i,e,t,function(e){return Object.entries(e).map(S).join("")}(l));n.statisticContainer.innerHTML=s}function S(e){var t,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1],o=(t=i,a.z[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]);return"<div>".concat(r,": ").concat(i," ").concat(o,"</div>")}function L(){n.usersContainer.innerHTML="",r.replaceMurkup(p)}function C(){b(p=d.filter((function(e){return P(e,f.searchValue)})).filter((function(e){return t=e.gender,0===(n=f.gender).length||n.includes(t);var t,n})).filter((function(e){return t=e.dob.age,n=f.age,r=Object.keys(j).find((function(e){return j[e].min<=t&&j[e].max>=t})),0===n.length||n.includes(r);var t,n,r})).sort(function(e){if("0"!==m.selectedOptions)return O[e]}(m.selectedOptions))),h=p.length,p=p.slice(v,y)}n.loadMore.addEventListener("click",(function(e){var t,a;n.spiner.classList.remove("is-hidden"),n.search.value="",n.usersContainer.innerHTML="",m.selectedOptions="",m.perPage=5,f.gender=[],f.age=[],y=5,n.selectPerPage.selectedIndex=0,n.select.selectedIndex=0,g=1,n.allCheckbox.forEach((function(e){e.checked=!1})),(100,t=Math.floor(100*Math.random()+1),a="".concat("https://randomuser.me/api/","?&results=").concat(t),fetch(a).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){!function(e){e.classList.add("is-hidden")}(n.spiner),d=function(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),C(),r.replaceMurkup(p),b(d),k()})),function(){var e=document.querySelectorAll("[data-select]");function t(e){this.querySelector("[data-filter-path]").classList.toggle("is-open"),this.nextElementSibling.classList.toggle("visually-hidden")}e&&e.forEach((function(e){e.addEventListener("click",t)}))}(),n.filter.classList.remove("is-hidden"),n.search.addEventListener("input",(function(e){f.searchValue=e.target.value.trim().toLowerCase(),C(),L(),k()})),n.search.addEventListener("keypress",(function(e){13==e.keyCode&&e.preventDefault()})),n.allCheckbox.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target.name,n=e.target.value;f[t].includes(n)?f[t]=f[t].filter((function(e){return e!==n})):f[t].push(n),console.log(f.gender),C(),L(),k()}))})),n.content.classList.remove("is-hidden"),n.select.addEventListener("change",(function(e){m.selectedOptions=this.value,C(),L()})),n.selectPerPage.addEventListener("change",(function(e){"100"===this.value?m.perPage=100:m.perPage=+this.value,u=Math.ceil(p.length/m.perPage),M(),C(),L(),k()}))}));var O={0:function(){return P(m.selectedOptions)},1:function(e,t){return e.name.last.localeCompare(t.name.last)},2:function(e,t){return t.name.last.localeCompare(e.name.last)},3:function(e,t){return t.gender.localeCompare(e.gender)},4:function(e,t){return e.gender.localeCompare(t.gender)},5:function(e,t){return t.gender.localeCompare(e.gender)||e.name.last.localeCompare(t.name.last)},6:function(e,t){return t.gender.localeCompare(e.gender)||t.name.last.localeCompare(e.name.last)},7:function(e,t){return e.gender.localeCompare(t.gender)||e.name.last.localeCompare(t.name.last)},8:function(e,t){return e.gender.localeCompare(t.gender)||t.name.last.localeCompare(e.name.last)}};function P(e,t){return""===t||function(e,t){return e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t)||e.name.first.toLowerCase().includes(t)||e.name.last.toLowerCase().includes(t)}(e,t)}var j={"0-35":{min:0,max:35},"35-40":{min:35,max:40},"40-45":{min:40,max:45},"45+":{min:45,max:1/0}};function k(){u=Math.ceil(h/m.perPage),n.paginationList.innerHTML="",w(),document.querySelector(".pagination__list").addEventListener("click",(function(e){e.preventDefault(),"A"===e.target.nodeName&&(g=+e.target.textContent),M(),C(),L(),w()})),n.nextStep.addEventListener("click",(function(e){e.preventDefault(),g+=1,w(),M(),C(),L()})),n.prevStep.addEventListener("click",(function(e){e.preventDefault(),g-=1,w(),M(),C(),L()})),n.startStep.addEventListener("click",(function(e){e.preventDefault(),g=1,w(),M(),C(),L()})),n.endStep.addEventListener("click",(function(e){e.preventDefault(),g=u,w(),M(),C(),L()}))}function w(){var e;n.paginationList.innerHTML="",(e=document.querySelector(".pagination__item.active"))&&e.classList.remove("active"),g>1?(n.startStep.classList.remove("pagination-state--disabled"),n.prevStep.classList.remove("pagination-state--disabled")):(n.startStep.classList.add("pagination-state--disabled"),n.prevStep.classList.add("pagination-state--disabled")),+g===u?(n.nextStep.classList.add("pagination-state--disabled"),n.endStep.classList.add("pagination-state--disabled")):(n.nextStep.classList.remove("pagination-state--disabled"),n.endStep.classList.remove("pagination-state--disabled")),function(e,t,n){var r=Math.round(2.5),a=5,i=5;e<5&&(i=e,r=2),n+r>=e?a=e:n>r?a=n+r:n+r<e&&(a=i);var o=a-i;return Array.from({length:i},(function(e,t){return t+1+o}))}(u,0,g).forEach((function(e){var t=g===e,a=r.createPagePaginationMarkUp(e,t?"active":"",!1);n.paginationList.insertAdjacentHTML("beforeend",a)}))}function M(){v=(g-1)*m.perPage,y=v+m.perPage}}()}();
//# sourceMappingURL=bundle.js.map