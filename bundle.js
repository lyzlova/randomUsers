!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,c=["пользователь","пользователя","пользователей"],l=[],s=[],u=[],d={searchValue:"",gender:[],age:[]},p={selectedOptions:"4",perPage:5},f=1,m=0,g=5,v={loadMore:document.querySelector("[data-load-more]"),usersContainer:document.querySelector("[data-users-container]"),user:document.querySelector("#user-template"),spiner:document.querySelector("[data-load-spiner]"),statisticTemplate:document.querySelector("#statistics"),statisticContainer:document.querySelector(".statistics"),filter:document.querySelector(".filter"),search:document.querySelector("[data-input-search]"),content:document.querySelector(".users-content"),select:document.querySelector("#sort-control"),allCheckbox:Array.from(document.querySelectorAll('input[type="checkbox"]')),paginationList:document.querySelector(".pagination__list"),startStep:document.querySelector("#first-step"),endStep:document.querySelector("#last-step"),prevStep:document.querySelector("#prev-step"),nextStep:document.querySelector("#next-step"),selectPerPage:document.querySelector("#view-control")};function h(e){e.map(y),v.spiner.classList.add("is-hidden")}function y(e){var t=e.picture,n=e.name,r=e.gender,a=e.phone,i=e.email,o=e.location,c=e.dob,l=e.registered,s=new Date(c.date),u="".concat(b(s.getUTCDate()),"-").concat(b(s.getUTCMonth()+1),"-").concat(s.getUTCFullYear()),d=new Date(l.date),p="".concat(b(d.getUTCDate()),"-").concat(b(d.getUTCMonth()+1),"-").concat(d.getUTCFullYear()),f=v.user.innerHTML.replace(/{{hrefImg}}/gi,t.large).replace(/{{lastName}}/,n.last).replace(/{{firstName}}/,n.first).replace(/{{gender}}/,r).replace(/{{phone}}/gi,a).replace(/{{email}}/gi,i).replace(/{{state}}/,o.state).replace(/{{city}}/,o.city).replace(/{{street}}/,o.street.name).replace(/{{birthday}}/,u).replace(/{{registered}}/,p);v.usersContainer.insertAdjacentHTML("beforeend",f)}function b(e){return String(e).padStart(2,"0")}function S(e){var r=e.filter((function(e){return"female"===e.gender})),a=e.filter((function(e){return"male"===e.gender})),i=r>a?"женщин":r<a?"мужчин":"равное количество",o=e.flatMap((function(e){return e.nat})).reduce((function(e,r){return t(t({},e),{},n({},r,e[r]?e[r]+1:1))}),{}),c=v.statisticTemplate.innerHTML.replace(/{{users}}/,e.length).replace(/{{female}}/,r.length).replace(/{{male}}/,a.length).replace(/{{dominantGender}}/,i).replace(/{{nationality}}/,function(e){return Object.entries(e).map(L).join("")}(o));v.statisticContainer.innerHTML=c}function L(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(t,n)||a(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],o=r[1],l=function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}(o,c);return"<div>".concat(i,": ").concat(o," ").concat(l,"</div>")}function C(){v.usersContainer.innerHTML=""}function O(){C(),h(s),S(s)}function P(){s=l.filter((function(e){return q(e,d.searchValue)})).filter((function(e){return t=e.gender,0===(n=d.gender).length||n.includes(t);var t,n})).filter((function(e){return t=e.dob.age,n=d.age,r=Object.keys(w).find((function(e){return w[e].min<=t&&w[e].max>=t})),0===n.length||n.includes(r);var t,n,r})).sort(function(e){if("0"!==p.selectedOptions)return j[e]}(p.selectedOptions)),u=r(s),s=s.slice(m,g)}v.loadMore.addEventListener("click",(function(e){var t,n;v.spiner.classList.remove("is-hidden"),v.search.value="",p.selectedOptions="",p.perPage=5,v.selectPerPage.selectedIndex=0,v.select.selectedIndex=0,f=1,C(),(101,t=Math.floor(101*Math.random()),n="".concat("https://randomuser.me/api/","?&results=").concat(t),fetch(n).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){l=r(e),s=r(e),u=r(e),h(l.slice(0,5)),S(l),o=Math.ceil(s.length/p.perPage),v.paginationList.innerHTML="",T(),E()})),function(){var e=document.querySelectorAll("[data-select]");function t(e){this.querySelector("[data-filter-path]").classList.toggle("is-open"),this.nextElementSibling.classList.toggle("visually-hidden")}e&&e.forEach((function(e){e.addEventListener("click",t)}))}(),v.filter.classList.remove("is-hidden"),v.search.addEventListener("input",(function(e){d.searchValue=e.target.value.trim().toLowerCase(),P(),O(),M()})),v.search.addEventListener("keypress",(function(e){13==e.keyCode&&e.preventDefault()})),v.content.classList.remove("is-hidden"),v.select.addEventListener("change",(function(e){p.selectedOptions=this.value,P(),O()})),v.selectPerPage.addEventListener("change",(function(e){"100"===this.value?p.perPage=u.length:p.perPage=+this.value,o=Math.ceil(u.length/p.perPage),x(),P(),O(),M()})),v.allCheckbox.forEach((function(e){e.addEventListener("click",(function(e){var t=e.target.name,n=e.target.value;d[t].includes(n)?d[t]=d[t].filter((function(e){return e!==n})):d[t].push(n),P(),C(),h(s),S(s),M()}))}))}));var j={0:function(){return q(p.selectedOptions)},1:function(e,t){return e.name.last.localeCompare(t.name.last)},2:function(e,t){return t.name.last.localeCompare(e.name.last)},3:function(e,t){return t.gender.localeCompare(e.gender)},4:function(e,t){return e.gender.localeCompare(t.gender)},5:function(e,t){return t.gender.localeCompare(e.gender)||e.name.last.localeCompare(t.name.last)},6:function(e,t){return t.gender.localeCompare(e.gender)||t.name.last.localeCompare(e.name.last)},7:function(e,t){return e.gender.localeCompare(t.gender)||e.name.last.localeCompare(t.name.last)},8:function(e,t){return e.gender.localeCompare(t.gender)||t.name.last.localeCompare(e.name.last)}};function q(e,t){return""===t||function(e,t){return e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t)||e.name.first.toLowerCase().includes(t)||e.name.last.toLowerCase().includes(t)}(e,t)}var w={"0-35":{min:0,max:35},"35-40":{min:35,max:40},"40-45":{min:40,max:45},"45+":{min:45,max:1/0}};function M(){o=Math.ceil(u.length/p.perPage),v.paginationList.innerHTML="",T(),E()}function E(){document.querySelector(".pagination__list").addEventListener("click",(function(e){e.preventDefault(),"A"===e.target.nodeName&&(f=+e.target.textContent),x(),P(),O(),T()})),v.nextStep.addEventListener("click",(function(e){e.preventDefault(),f+=1,T(),x(),P(),O()})),v.prevStep.addEventListener("click",(function(e){e.preventDefault(),f-=1,T(),x(),P(),O()})),v.startStep.addEventListener("click",(function(e){e.preventDefault(),f=1,T(),x(),P(),O()})),v.endStep.addEventListener("click",(function(e){e.preventDefault(),f=o,T(),x(),P(),O()}))}function T(){var e;v.paginationList.innerHTML="",(e=document.querySelector(".pagination__item.active"))&&e.classList.remove("active"),f>1?(v.startStep.classList.remove("pagination-state--disabled"),v.prevStep.classList.remove("pagination-state--disabled")):(v.startStep.classList.add("pagination-state--disabled"),v.prevStep.classList.add("pagination-state--disabled")),+f===o?(v.nextStep.classList.add("pagination-state--disabled"),v.endStep.classList.add("pagination-state--disabled")):(v.nextStep.classList.remove("pagination-state--disabled"),v.endStep.classList.remove("pagination-state--disabled")),function(e,t,n){var r=Math.round(2.5),a=5,i=5;e<5&&(i=e,r=2),n+r>=e?a=e:n>r?a=n+r:n+r<e&&(a=i);var o=a-i;return Array.from({length:i},(function(e,t){return t+1+o}))}(o,0,f).forEach((function(e){var t=function(e){return'<a href="#" class="pagination__item '.concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",'" data-page="').concat(e,'">').concat(e,"</a>")}(e,f===e?"active":"",!1);v.paginationList.insertAdjacentHTML("beforeend",t)}))}function x(){m=(f-1)*p.perPage,g=m+p.perPage}}();
//# sourceMappingURL=bundle.js.map