!function(){"use strict";!function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t,n={loadMore:document.querySelector("[data-load-more]"),btnOpenContent:document.querySelector("[data-open-content]"),btnCloseFilter:document.querySelector("[data-close-filter]"),backdrop:document.querySelector("[data-filter-backdrop]"),usersContainer:document.querySelector("[data-users-container]"),user:document.querySelector("#user-template"),spiner:document.querySelector("[data-load-spiner]"),statisticTemplate:document.querySelector("#statistics"),statisticContainer:document.querySelector(".statistics"),filter:document.querySelector(".filter"),form:document.querySelector("#data"),search:document.querySelector("[data-input-search]"),content:document.querySelector(".users-content"),select:document.querySelector("#sort-control"),allCheckbox:(t=document.querySelectorAll('input[type="checkbox"]'),function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),paginationList:document.querySelector(".pagination__list"),startStep:document.querySelector("#first-step"),endStep:document.querySelector("#last-step"),prevStep:document.querySelector("#prev-step"),nextStep:document.querySelector("#next-step"),selects:document.querySelectorAll("select"),selectPerPage:document.querySelector("#view-control"),dropdownFilter:document.querySelectorAll("[data-select]")},r={makeUserCard:function(e){var t=e.picture,r=e.name,a=e.gender,o=e.phone,i=e.email,c=e.location,l=e.dob,s=e.registered,d=new Date(l.date).toLocaleDateString(),u=new Date(s.date).toLocaleDateString();return n.user.innerHTML.replace(/{{hrefImg}}/gi,t.large).replace(/{{lastName}}/,r.last).replace(/{{firstName}}/,r.first).replace(/{{gender}}/,a).replace(/{{phone}}/gi,o).replace(/{{email}}/gi,i).replace(/{{state}}/,c.state).replace(/{{city}}/,c.city).replace(/{{street}}/,c.street.name).replace(/{{birthday}}/,d).replace(/{{registered}}/,u)},replaceMurkup:function(e){var t=e.map(this.makeUserCard).join("");n.usersContainer.insertAdjacentHTML("beforeend",t)},makeStatistics:function(e,t,r,a,o){return n.statisticTemplate.innerHTML.replace(/{{users}}/,r.length).replace(/{{female}}/,e.length).replace(/{{male}}/,t.length).replace(/{{dominantGender}}/,a).replace(/{{nationality}}/,o)},createPagePaginationMarkUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return'<a href="#" class="pagination__item '.concat(t,'" data-page="').concat(e,'">').concat(e,"</a>")}},a={changePath:function(e){this.querySelector("[data-filter-path]").classList.toggle("is-open"),this.nextElementSibling.classList.toggle("visually-hidden")},addStyle:function(e,t){e.classList.add(t)},removeStyle:function(e,t){e.classList.remove(t)},changeStylePagination:function(e,t){var r=document.querySelector(".pagination__item.active");r&&r.classList.remove("active"),e>1?(this.removeStyle(n.startStep,"pagination-state--disabled"),this.removeStyle(n.prevStep,"pagination-state--disabled")):(this.addStyle(n.startStep,"pagination-state--disabled"),this.addStyle(n.prevStep,"pagination-state--disabled")),+e===t?(this.addStyle(n.nextStep,"pagination-state--disabled"),this.addStyle(n.endStep,"pagination-state--disabled")):(this.removeStyle(n.nextStep,"pagination-state--disabled"),this.removeStyle(n.endStep,"pagination-state--disabled"))}};window.addEventListener("keydown",(function(e){"Escape"===e.code&&(a.addStyle(document.body,"modal-open"),a.addStyle(n.backdrop,"is-hidden"),a.addStyle(n.filter,"mobile-is-hidden"),a.addStyle(n.backdrop,"is-hidden"))})),window.addEventListener("click",(function(e){e.target===n.btnOpenContent&&(a.removeStyle(n.filter,"mobile-is-hidden"),a.removeStyle(n.backdrop,"is-hidden")),e.target.parentNode===n.btnCloseFilter&&(a.addStyle(n.filter,"mobile-is-hidden"),a.addStyle(n.backdrop,"is-hidden")),e.target===n.backdrop&&(a.addStyle(n.filter,"mobile-is-hidden"),a.addStyle(n.backdrop,"is-hidden"))}));var o=a,i=JSON.parse('{"z":["пользователь","пользователя","пользователей"]}');function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p,f=[],m=[],y={search:"",gender:[],age:[],sort:"0",perPage:"5"},g=1,h=0,S=5,b=0;function v(e){var t,a=e.filter((function(e){return"female"===e.gender})),o=e.filter((function(e){return"male"===e.gender}));t=a>o?"женщин":a<o?"мужчин":"равное количество";var i=e.flatMap((function(e){return e.nat})).reduce((function(e,t){return l(l({},e),{},s({},t,e[t]?e[t]+1:1))}),{});n.statisticContainer.innerHTML=r.makeStatistics(a,o,e,t,function(e){return Object.entries(e).map(L).join("")}(i))}function L(e){var t,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],a=n[1],o=(t=a,i.z[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]);return"<div>".concat(r,": ").concat(a," ").concat(o,"</div>")}function C(){n.usersContainer.innerHTML="",r.replaceMurkup(m)}function k(){var e=new FormData(n.form),t=Object.fromEntries(e.entries());for(var r in e.forEach((function(n,r){Array.isArray(y[r])?y[r]=e.getAll([r]):y[r]=t[r].trim().toLowerCase()})),y)t.hasOwnProperty(r)||(y[r]=[])}function w(){v(m=f.filter((function(e){return j(e,y.search)})).filter((function(e){return t=e.gender,0===(n=y.gender).length||n.includes(t);var t,n})).filter((function(e){return t=e.dob.age,n=y.age,r=Object.keys(P).find((function(e){return P[e].min<=t&&P[e].max>=t})),0===n.length||n.includes(r);var t,n,r})).sort(function(e){if("0"!==y.sort)return O[e]}(y.sort))),b=m.length,m=m.slice(h,S)}n.loadMore.addEventListener("click",(function(e){var t,a;o.removeStyle(n.spiner,"is-hidden"),o.removeStyle(n.content,"is-hidden"),o.removeStyle(n.filter,"is-hidden"),o.removeStyle(n.btnOpenContent,"is-hidden"),n.search.value="",n.usersContainer.innerHTML="",y.sort="",y.perPage=5,y.gender=[],y.age=[],S=5,n.selectPerPage.selectedIndex=0,n.select.selectedIndex=0,g=1,n.allCheckbox.forEach((function(e){e.checked=!1})),(100,t=Math.floor(100*Math.random()+1),a="".concat("https://randomuser.me/api/","?&results=").concat(t),fetch(a).then((function(e){return e.json()})).then((function(e){return e.results}))).then((function(e){o.addStyle(n.spiner,"is-hidden"),f=function(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e),w(),r.replaceMurkup(m),v(f),q()})),n.dropdownFilter&&n.dropdownFilter.forEach((function(e){e.addEventListener("click",o.changePath)}))})),n.form.addEventListener("input",(function(e){k(),w(),C(),E(),q(),n.search.addEventListener("keypress",(function(e){13===e.keyCode&&e.preventDefault()}))})),n.selects&&n.selects.forEach((function(e){e.addEventListener("change",(function(){k(),E(),w(),C(),q()}))}));var O={0:function(){return j(y.sort)},1:function(e,t){return e.name.last.localeCompare(t.name.last)},2:function(e,t){return t.name.last.localeCompare(e.name.last)},3:function(e,t){return t.gender.localeCompare(e.gender)},4:function(e,t){return e.gender.localeCompare(t.gender)},5:function(e,t){return t.gender.localeCompare(e.gender)||e.name.last.localeCompare(t.name.last)},6:function(e,t){return t.gender.localeCompare(e.gender)||t.name.last.localeCompare(e.name.last)},7:function(e,t){return e.gender.localeCompare(t.gender)||e.name.last.localeCompare(t.name.last)},8:function(e,t){return e.gender.localeCompare(t.gender)||t.name.last.localeCompare(e.name.last)}};function j(e,t){return""===t||function(e,t){return e.email.toLowerCase().includes(t)||e.phone.toLowerCase().includes(t)||e.name.first.toLowerCase().includes(t)||e.name.last.toLowerCase().includes(t)}(e,t)}var P={"0-35":{min:0,max:35},"35-40":{min:35,max:40},"40-45":{min:40,max:45},"45+":{min:45,max:1/0}};function q(){p=Math.ceil(b/y.perPage),n.paginationList.innerHTML="",A(),document.querySelector(".pagination__list").addEventListener("click",(function(e){"A"===e.target.nodeName&&(g=+e.target.textContent),E(),w(),C(),A()})),n.nextStep.addEventListener("click",(function(e){g+=1,A(),E(),w(),C()})),n.prevStep.addEventListener("click",(function(e){g-=1,A(),E(),w(),C()})),n.startStep.addEventListener("click",(function(e){g=1,A(),E(),w(),C()})),n.endStep.addEventListener("click",(function(e){g=p,A(),E(),w(),C()}))}function A(){n.paginationList.innerHTML="",o.changeStylePagination(g,p),function(e,t,n){var r=Math.round(2.5),a=5,o=5;e<5&&(o=e,r=2),n+r>=e?a=e:n>r?a=n+r:n+r<e&&(a=o);var i=a-o;return Array.from({length:o},(function(e,t){return t+1+i}))}(p,0,g).forEach((function(e){var t=g===e,a=r.createPagePaginationMarkUp(e,t?"active":"",!1);n.paginationList.insertAdjacentHTML("beforeend",a)}))}function E(){h=(g-1)*y.perPage,S=h+y.perPage}}()}();
//# sourceMappingURL=bundle.js.map